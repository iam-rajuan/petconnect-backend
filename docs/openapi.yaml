openapi: 3.0.3
info:
  title: PetConnect API
  version: 1.0.0
servers:
  - url: /api/v1
tags:
  - name: AdminAuth
  - name: AdminProfile
  - name: AdminUsers
  - name: AdminPets
  - name: AdminServiceSettings
  - name: AdminServiceManagement
  - name: AdminAdoption
  - name: AdminAdoptionRequests
  - name: AdminReports
  - name: UserAuth
  - name: UserProfiles
  - name: UserUploads
  - name: UserPets
  - name: UserProviders
  - name: UserServices
  - name: UserBookings
  - name: UserPayments
  - name: UserAppointments
  - name: UserAdoption
  - name: UserMessages
  - name: UserCommunity
  - name: Webhooks
components:
  securitySchemes:
    AccessToken:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Access token returned after login or profile completion.
    SetupToken:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Setup token returned after OTP verification for onboarding.
  schemas:
    RegisterInput:
      type: object
      required: [name, email, password]
      properties:
        name:
          type: string
          example: Jane Doe
        email:
          type: string
          format: email
          example: jane@example.com
        password:
          type: string
          format: password
          example: Secret123
        phone:
          type: string
          example: "9876543210"
    VerifyEmailInput:
      type: object
      required: [email, otp]
      properties:
        email:
          type: string
          format: email
          example: jane@example.com
        otp:
          type: string
          example: "1234"
    ResendEmailOtpInput:
      type: object
      required: [email]
      properties:
        email:
          type: string
          format: email
          example: jane@example.com
    LoginInput:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
          format: email
          example: jane@example.com
        password:
          type: string
          format: password
          example: Secret123
    RefreshTokenInput:
      type: object
      required: [refreshToken]
      properties:
        refreshToken:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    ForgotPasswordInput:
      type: object
      required: [email]
      properties:
        email:
          type: string
          format: email
          example: jane@example.com
    ResetPasswordInput:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
          format: email
          example: jane@example.com
        password:
          type: string
          format: password
          example: NewSecret123
    VerifyResetPasswordOtpInput:
      type: object
      required: [email, otp]
      properties:
        email:
          type: string
          format: email
          example: jane@example.com
        otp:
          type: string
          example: "1234"
    SendPhoneOtpInput:
      type: object
      required: [phone, carrier]
      properties:
        phone:
          type: string
          example: "9876543210"
        carrier:
          type: string
          enum: [verizon, att, tmobile, sprint]
    VerifyPhoneOtpInput:
      type: object
      required: [phone, otp]
      properties:
        phone:
          type: string
          example: "9876543210"
        otp:
          type: string
          example: "1234"
    UpdateProfileInput:
      type: object
      properties:
        name:
          type: string
        bio:
          type: string
        phone:
          type: string
        address:
          type: string
        city:
          type: string
        country:
          type: string
        favorites:
          type: array
          items:
            type: string
        location:
          $ref: "#/components/schemas/Location"
    ChangePasswordInput:
      type: object
      required: [currentPassword, newPassword]
      properties:
        currentPassword:
          type: string
          format: password
        newPassword:
          type: string
          format: password
    UpdateAvatarInput:
      type: object
      required: [avatarUrl]
      properties:
        avatarUrl:
          type: string
          format: uri
    UpdateCoverInput:
      type: object
      required: [coverUrl]
      properties:
        coverUrl:
          type: string
          format: uri
    CompleteProfileInput:
      type: object
      required: [username, country]
      properties:
        username:
          type: string
          example: jane_doe
        country:
          type: string
          example: IN
        avatarUrl:
          type: string
          format: uri
          example: https://your-bucket.s3.amazonaws.com/users/avatars/abc.jpg
        favorites:
          type: array
          items:
            type: string
          example: ["dogs", "cats"]
    Location:
      type: object
      properties:
        city:
          type: string
          example: ""
        country:
          type: string
          example: IN
    PetMedicalRecord:
      type: object
      properties:
        title:
          type: string
          example: Vaccination Record
        documentUrl:
          type: string
          format: uri
        uploadedAt:
          type: string
          format: date-time
    PetHealthRecord:
      type: object
      properties:
        type:
          type: string
          enum: [vaccination, checkup, medication, tick_flea, surgery, dental, other]
        recordDetails:
          type: object
          properties:
            recordName:
              type: string
            batchLotNo:
              type: string
              nullable: true
            otherInfo:
              type: string
              nullable: true
            cost:
              type: string
              nullable: true
            date:
              type: string
              nullable: true
            nextDueDate:
              type: string
              nullable: true
            reminder:
              type: object
              properties:
                enabled:
                  type: boolean
                offset:
                  type: string
                  nullable: true
        veterinarian:
          type: object
          properties:
            designation:
              type: string
              nullable: true
            name:
              type: string
              nullable: true
            clinicName:
              type: string
              nullable: true
            licenseNo:
              type: string
              nullable: true
            contact:
              type: string
              nullable: true
        vitalSigns:
          type: object
          properties:
            weight:
              type: string
              nullable: true
            temperature:
              type: string
              nullable: true
            heartRate:
              type: string
              nullable: true
            respiratory:
              type: string
              nullable: true
            status:
              type: string
              enum: [normal, high, low]
              nullable: true
        observation:
          type: object
          properties:
            lookupObservations:
              type: array
              items:
                type: string
            clinicalNotes:
              type: string
              nullable: true
        attachments:
          type: array
          items:
            type: string
            format: uri
    PetHealthRecordForm:
      type: object
      properties:
        recordDetails:
          type: string
          description: JSON string for recordDetails
        veterinarian:
          type: string
          description: JSON string for veterinarian
        vitalSigns:
          type: string
          description: JSON string for vitalSigns
        observation:
          type: string
          description: JSON string for observation
        files:
          type: array
          maxItems: 3
          items:
            type: string
            format: binary
    PetHealthRecordUpdateForm:
      type: object
      properties:
        type:
          type: string
          enum: [vaccination, checkup, medication, tick_flea, surgery, dental, other]
        recordType:
          type: string
          description: Free-form type, normalized to enum server-side
        recordDetails:
          type: string
          description: JSON string for recordDetails
        veterinarian:
          type: string
          description: JSON string for veterinarian
        vitalSigns:
          type: string
          description: JSON string for vitalSigns
        observation:
          type: string
          description: JSON string for observation
        recordName:
          type: string
        batchNumber:
          type: string
        otherInfo:
          type: string
        cost:
          type: string
        date:
          type: string
        nextDueDate:
          type: string
        reminderEnabled:
          type: boolean
        reminderDuration:
          type: string
        vetDesignation:
          type: string
        vetName:
          type: string
        clinicName:
          type: string
        licenseNumber:
          type: string
        vetContact:
          type: string
        weight:
          type: string
        weightStatus:
          type: string
          enum: [normal, high, low]
        temperature:
          type: string
        temperatureStatus:
          type: string
          enum: [normal, high, low]
        heartRate:
          type: string
        heartRateStatus:
          type: string
          enum: [normal, high, low]
        respiratoryRate:
          type: string
        respiratoryRateStatus:
          type: string
          enum: [normal, high, low]
        status:
          type: string
          enum: [normal, high, low]
        observations:
          type: string
          description: JSON array string of observation items
        clinicalNotes:
          type: string
        deleteAttachments:
          type: string
          description: JSON array string of attachment keys or URLs to remove
        files:
          type: array
          maxItems: 3
          items:
            type: string
            format: binary
    Pet:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        owner:
          type: string
        name:
          type: string
        type:
          type: string
        species:
          type: string
        breed:
          type: string
          nullable: true
        age:
          type: number
          nullable: true
        weightLbs:
          type: number
          nullable: true
        gender:
          type: string
          enum: [male, female]
          nullable: true
        trained:
          type: boolean
          nullable: true
        vaccinated:
          type: boolean
          nullable: true
        neutered:
          type: boolean
          nullable: true
        personality:
          type: array
          items:
            type: string
        about:
          type: string
          nullable: true
        bio:
          type: string
          nullable: true
        avatarUrl:
          type: string
          format: uri
          nullable: true
        photos:
          type: array
          items:
            type: string
            format: uri
        medicalRecords:
          type: array
          items:
            $ref: "#/components/schemas/PetMedicalRecord"
        healthRecords:
          type: array
          items:
            $ref: "#/components/schemas/PetHealthRecord"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    PetCreateInput:
      type: object
      required: [name]
      properties:
        name:
          type: string
        type:
          type: string
        species:
          type: string
        breed:
          type: string
        age:
          type: number
        weightLbs:
          type: number
        gender:
          type: string
          enum: [male, female]
        trained:
          type: boolean
        vaccinated:
          type: boolean
        neutered:
          type: boolean
        personality:
          type: array
          items:
            type: string
        about:
          type: string
        bio:
          type: string
        photos:
          type: array
          items:
            type: string
            format: uri
        avatarUrl:
          type: string
          format: uri
    PetUpdateInput:
      type: object
      properties:
        name:
          type: string
        type:
          type: string
        species:
          type: string
        breed:
          type: string
        age:
          type: number
        weightLbs:
          type: number
        gender:
          type: string
          enum: [male, female]
        trained:
          type: boolean
        vaccinated:
          type: boolean
        neutered:
          type: boolean
        personality:
          type: array
          items:
            type: string
        about:
          type: string
        bio:
          type: string
        photos:
          type: array
          items:
            type: string
            format: uri
        avatarUrl:
          type: string
          format: uri
        keepPhotos:
          type: array
          items:
            type: string
        deletePhotos:
          type: array
          items:
            type: string
    AuthTokenPayload:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        role:
          type: string
          example: user
        type:
          type: string
          enum: [access, refresh, setup]
        tokenVersion:
          type: integer
          nullable: true
        iat:
          type: integer
        exp:
          type: integer
    UserAuthUser:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        name:
          type: string
          example: Jane Doe
        email:
          type: string
          format: email
          example: jane@example.com
        phone:
          type: string
          example: "9876543210"
        role:
          type: string
          example: user
        status:
          type: string
          enum: [active, deletion_request]
        username:
          type: string
          example: jane_doe
        avatarUrl:
          type: string
          format: uri
        coverUrl:
          type: string
          format: uri
        address:
          type: string
          example: ""
        location:
          $ref: "#/components/schemas/Location"
        favorites:
          type: array
          items:
            type: string
        isVerified:
          type: boolean
          example: true
        profileCompleted:
          type: boolean
          example: true
    User:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        name:
          type: string
          example: Jane Doe
        email:
          type: string
          format: email
          example: jane@example.com
        phone:
          type: string
          example: "9876543210"
        role:
          type: string
          example: user
        status:
          type: string
          enum: [active, deletion_request]
        bio:
          type: string
          example: ""
        username:
          type: string
          example: jane_doe
        avatarUrl:
          type: string
          format: uri
        coverUrl:
          type: string
          format: uri
        address:
          type: string
          example: ""
        location:
          $ref: "#/components/schemas/Location"
        favorites:
          type: array
          items:
            type: string
        isVerified:
          type: boolean
          example: true
        isPhoneVerified:
          type: boolean
          example: false
        pets:
          type: array
          items:
            $ref: "#/components/schemas/Pet"
        profileCompleted:
          type: boolean
          example: true
    UserSearchResult:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        name:
          type: string
          example: Jane Doe
        username:
          type: string
          example: jane_doe
        avatarUrl:
          type: string
          format: uri
          nullable: true
        role:
          type: string
          example: user
        lastSeenAt:
          type: string
          format: date-time
          nullable: true
        deletionRequestedAt:
          type: string
          format: date-time
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ProviderAvailability:
      type: object
      properties:
        day:
          type: integer
          minimum: 0
          maximum: 6
        startTime:
          type: string
          example: "09:00"
        endTime:
          type: string
          example: "17:00"
        isActive:
          type: boolean
    ProviderLocation:
      type: object
      properties:
        lat:
          type: number
        lng:
          type: number
    Provider:
      type: object
      properties:
        id:
          type: string
        owner:
          type: string
        name:
          type: string
        category:
          type: string
          enum: [vet, grooming, walking, training]
        bio:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        address:
          type: string
          nullable: true
        location:
          type: object
          properties:
            type:
              type: string
              example: Point
            coordinates:
              type: array
              items:
                type: number
        verificationStatus:
          type: string
          enum: [pending, verified, rejected]
        verifiedAt:
          type: string
          format: date-time
          nullable: true
        verifiedBy:
          type: string
          nullable: true
        availability:
          type: array
          items:
            $ref: "#/components/schemas/ProviderAvailability"
        averageRating:
          type: number
        ratingCount:
          type: integer
        distanceMeters:
          type: number
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ProviderCreateInput:
      type: object
      required: [name, category]
      properties:
        name:
          type: string
        category:
          type: string
          enum: [vet, grooming, walking, training]
        bio:
          type: string
        phone:
          type: string
        email:
          type: string
        address:
          type: string
        location:
          $ref: "#/components/schemas/ProviderLocation"
        availability:
          type: array
          items:
            $ref: "#/components/schemas/ProviderAvailability"
    ProviderUpdateInput:
      type: object
      properties:
        name:
          type: string
        category:
          type: string
          enum: [vet, grooming, walking, training]
        bio:
          type: string
        phone:
          type: string
        email:
          type: string
        address:
          type: string
        location:
          $ref: "#/components/schemas/ProviderLocation"
        availability:
          type: array
          items:
            $ref: "#/components/schemas/ProviderAvailability"
    ProviderVerifyInput:
      type: object
      required: [verificationStatus]
      properties:
        verificationStatus:
          type: string
          enum: [pending, verified, rejected]
    ProviderReviewInput:
      type: object
      required: [rating]
      properties:
        rating:
          type: integer
          minimum: 1
          maximum: 5
        comment:
          type: string
    ProviderReview:
      type: object
      properties:
        id:
          type: string
        provider:
          type: string
        user:
          type: string
        rating:
          type: integer
        comment:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ProviderListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Provider"
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        totalPages:
          type: integer
    Appointment:
      type: object
      properties:
        id:
          type: string
        provider:
          type: string
        customer:
          type: string
        startTime:
          type: string
          format: date-time
        endTime:
          type: string
          format: date-time
        status:
          type: string
          enum: [pending, confirmed, cancelled, completed]
        notes:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    AppointmentCreateInput:
      type: object
      required: [providerId, startTime, endTime]
      properties:
        providerId:
          type: string
        startTime:
          type: string
          format: date-time
        endTime:
          type: string
          format: date-time
        notes:
          type: string
    AppointmentStatusUpdateInput:
      type: object
      required: [status]
      properties:
        status:
          type: string
          enum: [pending, confirmed, cancelled, completed]
    AppointmentListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Appointment"
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        totalPages:
          type: integer
    AdoptionListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/AdoptionListing"
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        totalPages:
          type: integer
    AdoptionHealthRecord:
      type: object
      properties:
        type:
          type: string
          enum: [vaccination, checkup, medication, tick_flea, surgery, dental, other]
        recordDetails:
          type: object
          properties:
            recordName:
              type: string
            batchLotNo:
              type: string
              nullable: true
            otherInfo:
              type: string
              nullable: true
            cost:
              type: string
              nullable: true
            date:
              type: string
              nullable: true
            nextDueDate:
              type: string
              nullable: true
            reminder:
              type: object
              nullable: true
              properties:
                enabled:
                  type: boolean
                offset:
                  type: string
                  nullable: true
        veterinarian:
          type: object
          properties:
            designation:
              type: string
            name:
              type: string
            clinicName:
              type: string
            licenseNo:
              type: string
            contact:
              type: string
        vitalSigns:
          type: object
          properties:
            weight:
              type: string
            temperature:
              type: string
            heartRate:
              type: string
            respiratory:
              type: string
            status:
              type: string
              enum: [normal, high, low]
        observation:
          type: object
          properties:
            lookupObservations:
              type: array
              items:
                type: string
            clinicalNotes:
              type: string
              nullable: true
        attachments:
          type: array
          items:
            type: string
            format: uri
    AdoptionListing:
      type: object
      properties:
        id:
          type: string
        pet:
          type: string
          nullable: true
        owner:
          type: string
          nullable: true
        createdByRole:
          type: string
          enum: [user, admin]
        title:
          type: string
        description:
          type: string
          nullable: true
        location:
          type: string
        status:
          type: string
          enum: [available, pending, adopted]
        petName:
          type: string
        species:
          type: string
        breed:
          type: string
          nullable: true
        age:
          type: number
          nullable: true
        weightLbs:
          type: number
          nullable: true
        gender:
          type: string
          enum: [male, female]
          nullable: true
        trained:
          type: boolean
        vaccinated:
          type: boolean
        neutered:
          type: boolean
        personality:
          type: array
          items:
            type: string
        aboutPet:
          type: string
          nullable: true
        avatarUrl:
          type: string
          format: uri
          nullable: true
        photos:
          type: array
          items:
            type: string
            format: uri
        contactName:
          type: string
        contactEmail:
          type: string
          format: email
          nullable: true
        contactPhone:
          type: string
          nullable: true
        shelterName:
          type: string
          nullable: true
        shelterPhone:
          type: string
          nullable: true
        healthRecords:
          type: array
          items:
            $ref: "#/components/schemas/AdoptionHealthRecord"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    AdoptionCreateInput:
      type: object
      required: [petId, title, location]
      properties:
        petId:
          type: string
        title:
          type: string
        description:
          type: string
        location:
          type: string
        contactName:
          type: string
        contactEmail:
          type: string
          format: email
        contactPhone:
          type: string
    AdoptionStatusUpdateInput:
      type: object
      required: [status]
      properties:
        status:
          type: string
          enum: [available, pending, adopted]
    AdoptionRequest:
      type: object
      properties:
        id:
          type: string
        listing:
          type: string
        customer:
          type: string
        status:
          type: string
          enum: [pending, delivered]
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    CommunityMedia:
      type: object
      properties:
        url:
          type: string
          format: uri
        type:
          type: string
          enum: [image, video]
    CommunityPost:
      type: object
      properties:
        id:
          type: string
        author:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            username:
              type: string
            avatarUrl:
              type: string
              format: uri
        text:
          type: string
        media:
          type: array
          items:
            $ref: "#/components/schemas/CommunityMedia"
        postType:
          type: string
          enum: [regular, share, profile_update]
        shareText:
          type: string
        likesCount:
          type: integer
        commentsCount:
          type: integer
        sharesCount:
          type: integer
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        timeAgo:
          type: string
          example: 2 minutes ago
    CommunityComment:
      type: object
      properties:
        id:
          type: string
        postId:
          type: string
        author:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            username:
              type: string
            avatarUrl:
              type: string
              format: uri
        parentId:
          type: string
          nullable: true
        text:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        timeAgo:
          type: string
          example: 2 minutes ago
    CommunityReport:
      type: object
      properties:
        id:
          type: string
        postId:
          type: string
        reportedUser:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            username:
              type: string
            avatarUrl:
              type: string
              format: uri
        count:
          type: integer
        status:
          type: string
          enum: [pending, dismissed, removed, warned]
        reasons:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    CommunityPostCreateInput:
      type: object
      properties:
        text:
          type: string
          nullable: true
    CommunityPostUpdateInput:
      type: object
      properties:
        text:
          type: string
          nullable: true
    CommunityCommentCreateInput:
      type: object
      required: [text]
      properties:
        text:
          type: string
    CommunityShareInput:
      type: object
      properties:
        text:
          type: string
          nullable: true
    CommunityReportInput:
      type: object
      properties:
        reason:
          type: string
          nullable: true
    ConversationParticipant:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        avatarUrl:
          type: string
          format: uri
        role:
          type: string
    Message:
      type: object
      properties:
        id:
          type: string
        conversationId:
          type: string
        senderId:
          type: string
        recipientId:
          type: string
        body:
          type: string
        readAt:
          type: string
          format: date-time
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Conversation:
      type: object
      properties:
        id:
          type: string
        participants:
          type: array
          items:
            $ref: "#/components/schemas/ConversationParticipant"
        otherParticipant:
          $ref: "#/components/schemas/ConversationParticipant"
        lastMessage:
          $ref: "#/components/schemas/Message"
        lastMessageAt:
          type: string
          format: date-time
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    MessageCreateInput:
      type: object
      required: [recipientId, body]
      properties:
        recipientId:
          type: string
        body:
          type: string
    MessageListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Message"
        pagination:
          type: object
          properties:
            total:
              type: integer
            page:
              type: integer
            limit:
              type: integer
    AdminUserSummary:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        name:
          type: string
          example: Jane Doe
        username:
          type: string
          example: jane_doe
        email:
          type: string
          format: email
          example: jane@example.com
        status:
          type: string
          enum: [active, deletion_request]
        deletionRequestedAt:
          type: string
          format: date-time
          nullable: true
        daysLeft:
          type: integer
          minimum: 0
          nullable: true
        createdAt:
          type: string
          format: date-time
    AdminUserDetails:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        name:
          type: string
          example: Jane Doe
        username:
          type: string
          example: jane_doe
        email:
          type: string
          format: email
          example: jane@example.com
        phone:
          type: string
          example: "9876543210"
        status:
          type: string
          enum: [active, deletion_request]
        deletionRequestedAt:
          type: string
          format: date-time
          nullable: true
        daysLeft:
          type: integer
          minimum: 0
          nullable: true
        isVerified:
          type: boolean
          example: true
        isPhoneVerified:
          type: boolean
          example: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ServiceRequestSummary:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        customerName:
          type: string
          example: Jane Doe
        serviceType:
          type: string
          example: grooming
        petType:
          type: string
          example: dog
        petBreed:
          type: string
          example: Labrador
        petAge:
          type: integer
          nullable: true
          example: 3
        petAgeLabel:
          type: string
          example: 3 years
        status:
          type: string
          enum: [pending, completed]
        createdAt:
          type: string
          format: date-time
    ServiceRequestDetails:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        customer:
          type: object
          properties:
            name:
              type: string
              example: Jane Doe
            phone:
              type: string
              example: "9876543210"
        service:
          type: object
          properties:
            serviceName:
              type: string
              example: Full Grooming
            dateTime:
              type: string
              format: date-time
            providerName:
              type: string
              example: Happy Paws Grooming
            status:
              type: string
              enum: [pending, completed]
        pet:
          type: object
          properties:
            name:
              type: string
              example: Buddy
            type:
              type: string
              example: dog
            breed:
              type: string
              example: Labrador
            age:
              type: integer
              nullable: true
              example: 3
            ageLabel:
              type: string
              example: 3 years
        orderSummary:
          type: object
          properties:
            serviceName:
              type: string
              example: Full Grooming
            petName:
              type: string
              example: Buddy
            servicePrice:
              type: number
              example: 45
            items:
              type: array
              items:
                type: object
                properties:
                  serviceName:
                    type: string
                  petName:
                    type: string
                  price:
                    type: number
        payment:
          type: object
          properties:
            subtotal:
              type: number
              example: 45
            taxPercent:
              type: number
              example: 5
            total:
              type: number
              example: 47.25
            status:
              type: string
              enum: [paid, unpaid]
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    DeletionRequestResponse:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        deletionRequestedAt:
          type: string
          format: date-time
    AuthTokens:
      type: object
      properties:
        accessToken:
          type: string
        refreshToken:
          type: string
    AdminLoginInput:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
          format: email
          example: admin@petconnect.com
        password:
          type: string
          format: password
          example: AdminSecret123
    AdminResetPasswordInput:
      type: object
      required: [email, otp, password]
      properties:
        email:
          type: string
          format: email
          example: admin@petconnect.com
        otp:
          type: string
          example: "123456"
        password:
          type: string
          format: password
          example: NewAdminSecret123
    AdminAuthUser:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        name:
          type: string
          example: Admin Name
        email:
          type: string
          format: email
          example: admin@petconnect.com
        role:
          type: string
          enum: [admin]
    AdminProfile:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        name:
          type: string
          example: Admin Name
        email:
          type: string
          format: email
          example: admin@petconnect.com
    AdminUpdateProfileInput:
      type: object
      properties:
        name:
          type: string
          example: New Admin Name
        email:
          type: string
          format: email
          example: newadmin@petconnect.com
    AdminChangePasswordInput:
      type: object
      required: [currentPassword, newPassword]
      properties:
        currentPassword:
          type: string
          format: password
        newPassword:
          type: string
          format: password
    UpdateServiceStatusInput:
      type: object
      required: [status]
      properties:
        status:
          type: string
          enum: [pending, completed]
    ServiceCatalog:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        name:
          type: string
          example: Full Grooming
        type:
          type: string
          enum: [vet, grooming, training, walking]
        price:
          type: number
          example: 45
        isActive:
          type: boolean
          example: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    TaxSettingResponse:
      type: object
      properties:
        percent:
          type: number
          example: 5
    AvailabilitySettingInput:
      type: object
      required: [startTime, endTime, slotMinutes]
      properties:
        startTime:
          type: string
          example: "09:00"
        endTime:
          type: string
          example: "17:00"
        slotMinutes:
          type: integer
          example: 30
    AvailabilitySettingResponse:
      type: object
      properties:
        startTime:
          type: string
          example: "09:00"
        endTime:
          type: string
          example: "17:00"
        slotMinutes:
          type: integer
          example: 30
    AdminAdoptionListItem:
      type: object
      properties:
        id:
          type: string
        petType:
          type: string
        petBreed:
          type: string
        petAge:
          type: integer
          nullable: true
        status:
          type: string
          enum: [available, pending, adopted]
        petName:
          type: string
    AdminAdoptionRequestListItem:
      type: object
      properties:
        id:
          type: string
        listingId:
          type: string
        customerId:
          type: string
        customerName:
          type: string
        petType:
          type: string
        petBreed:
          type: string
        petAge:
          type: integer
          nullable: true
        status:
          type: string
          enum: [pending, delivered]
    AdminAdoptionSummaryItem:
      type: object
      properties:
        id:
          type: string
        petName:
          type: string
        petType:
          type: string
        petBreed:
          type: string
        petAge:
          type: integer
          nullable: true
        price:
          type: number
        status:
          type: string
          enum: [available, pending, adopted]
    PetPalSummary:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        username:
          type: string
        avatarUrl:
          type: string
          format: uri
          nullable: true
        bio:
          type: string
          nullable: true
        lastSeenAt:
          type: string
          format: date-time
          nullable: true
    AdminUserProfileResponse:
      type: object
      properties:
        profile:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            username:
              type: string
            avatarUrl:
              type: string
              format: uri
              nullable: true
            coverUrl:
              type: string
              format: uri
              nullable: true
            status:
              type: string
            reportCount:
              type: integer
            reportOnPostCount:
              type: integer
            email:
              type: string
              nullable: true
            phone:
              type: string
              nullable: true
            address:
              type: string
              nullable: true
            city:
              type: string
              nullable: true
            country:
              type: string
              nullable: true
            joiningDate:
              type: string
              format: date-time
            deletionRequestedAt:
              type: string
              format: date-time
              nullable: true
            deletionDaysLeft:
              type: integer
              nullable: true
        pets:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              status:
                type: string
              name:
                type: string
              age:
                type: integer
                nullable: true
              memoryStart:
                type: string
                format: date-time
              type:
                type: string
              gender:
                type: string
              breed:
                type: string
              trained:
                type: boolean
              neutered:
                type: boolean
              vaccinated:
                type: boolean
              avatarUrl:
                type: string
                format: uri
                nullable: true
              photos:
                type: array
                items:
                  type: string
                  format: uri
              vitalSigns:
                type: object
                properties:
                  heartRate:
                    type: string
                  respiratory:
                    type: string
                  temperature:
                    type: string
                  weight:
                    type: string
              personality:
                type: array
                items:
                  type: string
              aboutPet:
                type: string
              healthRecordCounts:
                type: object
                properties:
                  vaccination:
                    type: integer
                  checkup:
                    type: integer
                  medication:
                    type: integer
                  tick_flea:
                    type: integer
                  surgery:
                    type: integer
                  dental:
                    type: integer
                  other:
                    type: integer
        services:
          type: array
          items:
            type: object
    AdminAdoptionRequestDetails:
      type: object
      properties:
        id:
          type: string
        listing:
          type: object
          properties:
            id:
              type: string
            species:
              type: string
            breed:
              type: string
              nullable: true
            age:
              type: integer
              nullable: true
            status:
              type: string
              enum: [available, pending, adopted]
            petName:
              type: string
        customer:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            phone:
              type: string
              nullable: true
        status:
          type: string
          enum: [pending, delivered]
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    AdminAdoptionCreateInput:
      type: object
      required: [petName, petType, shelterName, shelterPhone, photos]
      properties:
        petName:
          type: string
        petType:
          type: string
        breed:
          type: string
        petAge:
          type: number
        weightLbs:
          type: number
        gender:
          type: string
          enum: [male, female]
        trained:
          type: boolean
        vaccinated:
          type: boolean
        neutered:
          type: boolean
        personality:
          type: string
          description: JSON array or comma-separated list
        aboutPet:
          type: string
        location:
          type: string
        shelterName:
          type: string
        shelterPhone:
          type: string
        avatarIndex:
          type: integer
        healthRecords:
          type: string
          description: JSON array of health records with fileIndexes
        photos:
          type: array
          minItems: 1
          maxItems: 3
          items:
            type: string
            format: binary
        healthFiles:
          type: array
          maxItems: 21
          items:
            type: string
            format: binary
    AdminAdoptionUpdateInput:
      type: object
      properties:
        status:
          type: string
          enum: [available, pending, adopted]
        title:
          type: string
        description:
          type: string
        location:
          type: string
        petName:
          type: string
        species:
          type: string
        breed:
          type: string
        age:
          type: number
        petAge:
          type: number
          description: Alternate age input; mapped to age
        weightLbs:
          type: number
        gender:
          type: string
          enum: [male, female]
        trained:
          type: boolean
        vaccinated:
          type: boolean
        neutered:
          type: boolean
        personality:
          type: array
          items:
            type: string
        aboutPet:
          type: string
        avatarUrl:
          type: string
          format: uri
        photos:
          type: array
          items:
            type: string
            format: uri
        contactName:
          type: string
        contactEmail:
          type: string
          format: email
        contactPhone:
          type: string
        shelterName:
          type: string
        shelterPhone:
          type: string
    BookingItem:
      type: object
      properties:
        service:
          type: string
        pet:
          type: string
        serviceName:
          type: string
          example: Full Grooming
        serviceType:
          type: string
          enum: [vet, grooming, training, walking]
        petName:
          type: string
          example: Buddy
        petType:
          type: string
          example: dog
        petBreed:
          type: string
          example: Labrador
        petAge:
          type: integer
          nullable: true
          example: 3
        unitPrice:
          type: number
          example: 45
    ServiceBooking:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        customer:
          type: string
        provider:
          type: string
          nullable: true
        pets:
          type: array
          items:
            type: string
        services:
          type: array
          items:
            type: string
        scheduledAt:
          type: string
          format: date-time
        reminderType:
          type: string
          enum: [none, day_before, week_before]
        reminderSentAt:
          type: string
          format: date-time
          nullable: true
        status:
          type: string
          enum: [pending, completed]
        paymentStatus:
          type: string
          enum: [paid, unpaid]
        paymentIntentId:
          type: string
          nullable: true
        paymentReceiptUrl:
          type: string
          nullable: true
        subtotal:
          type: number
          example: 90
        taxPercent:
          type: number
          example: 5
        taxAmount:
          type: number
          example: 4.5
        total:
          type: number
          example: 94.5
        currency:
          type: string
          example: usd
        paidAt:
          type: string
          format: date-time
          nullable: true
        items:
          type: array
          items:
            $ref: "#/components/schemas/BookingItem"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    BookingCreateInput:
      type: object
      required: [scheduledAt]
      properties:
        serviceIds:
          type: array
          items:
            type: string
        selectAllServices:
          type: boolean
        petIds:
          type: array
          items:
            type: string
        selectAllPets:
          type: boolean
        scheduledAt:
          type: string
          format: date-time
        reminderType:
          type: string
          enum: [none, day_before, week_before]
        providerId:
          type: string
    BookingConfirmResponse:
      type: object
      properties:
        bookingId:
          type: string
        services:
          type: array
          items:
            type: string
        appointmentDateTime:
          type: string
          format: date-time
        organizationName:
          type: string
          example: Carely Pets
        pets:
          type: array
          items:
            type: string
    BookingListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/ServiceBooking"
        pagination:
          type: object
          properties:
            total:
              type: integer
            page:
              type: integer
            limit:
              type: integer
    PetType:
      type: object
      properties:
        id:
          type: string
          example: 64f1c3e2d2f2b70012a8b0aa
        name:
          type: string
          example: Dog
        breeds:
          type: array
          items:
            type: string
            example: Labrador
        petBreedCount:
          type: integer
          example: 3
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    PetBreed:
      type: object
      properties:
        name:
          type: string
          example: Labrador
    CreatePetTypeInput:
      type: object
      required: [name]
      properties:
        name:
          type: string
          example: Dog
    UpdatePetTypeInput:
      type: object
      required: [name]
      properties:
        name:
          type: string
          example: Small Pet
    UpdatePetBreedsInput:
      type: object
      required: [breeds]
      properties:
        breeds:
          type: array
          items:
            type: string
          example: [Labrador, Poodle, Bulldog]
    UpdateServicesInput:
      type: object
      required: [services]
      properties:
        services:
          type: array
          items:
            type: object
            required: [name, type, price]
            properties:
              name:
                type: string
                example: VET
              type:
                type: string
                enum: [vet, grooming, training, walking]
              price:
                type: number
                example: 250
              isActive:
                type: boolean
                example: true
    CreatePetBreedInput:
      type: object
      required: [name]
      properties:
        name:
          type: string
          example: Labrador
    UpdatePetBreedInput:
      type: object
      required: [name]
      properties:
        name:
          type: string
          example: Golden Retriever
paths:
  /admin/settings/services:
    get:
      tags: [AdminServiceSettings]
      summary: Get all service settings
      security:
        - AccessToken: []
      responses:
        "200":
          description: Services list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/ServiceCatalog"
        "401":
          description: Unauthorized
    patch:
      tags: [AdminServiceSettings]
      summary: Replace all service settings
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateServicesInput"
      responses:
        "200":
          description: Services updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/ServiceCatalog"
        "400":
          description: Validation failed
    post:
      tags: [AdminServiceSettings]
      summary: Create service setting
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, type, price]
              properties:
                name:
                  type: string
                type:
                  type: string
                  enum: [vet, grooming, training, walking]
                price:
                  type: number
                isActive:
                  type: boolean
      responses:
        "201":
          description: Service created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/ServiceCatalog"
        "400":
          description: Validation failed
  /admin/settings/services/{id}:
    patch:
      tags: [AdminServiceSettings]
      summary: Update service setting
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                price:
                  type: number
                isActive:
                  type: boolean
      responses:
        "200":
          description: Service updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/ServiceCatalog"
        "404":
          description: Service not found
    delete:
      tags: [AdminServiceSettings]
      summary: Delete service setting
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Service deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Service not found
  /admin/settings/tax:
    get:
      tags: [AdminServiceSettings]
      summary: Get active tax percentage
      security:
        - AccessToken: []
      responses:
        "200":
          description: Active tax
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/TaxSettingResponse"
    post:
      tags: [AdminServiceSettings]
      summary: Set active tax percentage
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [percent]
              properties:
                percent:
                  type: number
      responses:
        "201":
          description: Tax updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/TaxSettingResponse"
        "400":
          description: Validation failed
    patch:
      tags: [AdminServiceSettings]
      summary: Update active tax percentage
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [percent]
              properties:
                percent:
                  type: number
      responses:
        "200":
          description: Tax updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/TaxSettingResponse"
        "400":
          description: Validation failed
  /admin/settings/availability:
    get:
      tags: [AdminServiceSettings]
      summary: Get availability settings
      security:
        - AccessToken: []
      responses:
        "200":
          description: Availability settings
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AvailabilitySettingResponse"
    patch:
      tags: [AdminServiceSettings]
      summary: Update availability settings
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AvailabilitySettingInput"
      responses:
        "200":
          description: Availability updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AvailabilitySettingResponse"
        "400":
          description: Validation failed
  /services:
    get:
      tags: [UserServices]
      summary: Get available services and tax
      security:
        - AccessToken: []
      responses:
        "200":
          description: Available services
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      services:
                        type: array
                        items:
                          $ref: "#/components/schemas/ServiceCatalog"
                      taxPercent:
                        type: number
        "401":
          description: Unauthorized
  /bookings:
    get:
      tags: [UserBookings]
      summary: Get booking history
      security:
        - AccessToken: []
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [all, pending, completed]
            default: all
        - name: paymentStatus
          in: query
          required: false
          schema:
            type: string
            enum: [all, paid, unpaid]
            default: all
        - name: page
          in: query
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 20
      responses:
        "200":
          description: Booking history
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/BookingListResponse"
    post:
      tags: [UserBookings]
      summary: Create service booking and payment intent
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BookingCreateInput"
      responses:
        "201":
          description: Booking created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      booking:
                        $ref: "#/components/schemas/ServiceBooking"
                      clientSecret:
                        type: string
        "400":
          description: Validation failed
  /bookings/availability:
    get:
      tags: [UserBookings]
      summary: Get available time slots for a date
      security:
        - AccessToken: []
      parameters:
        - name: date
          in: query
          required: true
          schema:
            type: string
            example: "2025-12-31"
      responses:
        "200":
          description: Available slots
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      date:
                        type: string
                      slots:
                        type: array
                        items:
                          type: string
        "400":
          description: Validation failed
        "401":
          description: Unauthorized
  /payments:
    get:
      tags: [UserPayments]
      summary: Get payment history
      security:
        - AccessToken: []
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [all, pending, completed]
            default: all
        - name: paymentStatus
          in: query
          required: false
          schema:
            type: string
            enum: [all, paid, unpaid]
            default: all
        - name: page
          in: query
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 20
      responses:
        "200":
          description: Payment history
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/BookingListResponse"
  /webhooks/stripe:
    post:
      tags: [Webhooks]
      summary: Stripe webhook (payment_intent.succeeded)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        "200":
          description: Webhook received
        "400":
          description: Invalid webhook signature
        "500":
          description: Webhook not configured
  /bookings/{id}/confirm:
    post:
      tags: [UserBookings]
      summary: Get payment confirmation for a booking
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Payment confirmed (paid via webhook)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/BookingConfirmResponse"
        "400":
          description: Payment not completed
        "404":
          description: Booking not found
  /admin/auth/login:
    post:
      tags: [AdminAuth]
      summary: Admin login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdminLoginInput"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      user:
                        $ref: "#/components/schemas/AdminAuthUser"
                      tokens:
                        $ref: "#/components/schemas/AuthTokens"
        "400":
          description: Login failed
  /admin/auth/refresh:
    post:
      tags: [AdminAuth]
      summary: Refresh admin tokens
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshTokenInput"
      responses:
        "200":
          description: Tokens refreshed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AuthTokens"
        "400":
          description: Refresh failed
  /admin/auth/logout:
    post:
      tags: [AdminAuth]
      summary: Logout admin by revoking refresh token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshTokenInput"
      responses:
        "200":
          description: Logged out
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "400":
          description: Logout failed
  /admin/auth/forgot-password:
    post:
      tags: [AdminAuth]
      summary: Request admin password reset OTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ForgotPasswordInput"
      responses:
        "200":
          description: OTP sent if email exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "400":
          description: Request failed
  /admin/auth/reset-password:
    post:
      tags: [AdminAuth]
      summary: Reset admin password with OTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdminResetPasswordInput"
      responses:
        "200":
          description: Password reset
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "400":
          description: Reset failed
  /admin/profile:
    get:
      tags: [AdminProfile]
      summary: Get admin profile
      security:
        - AccessToken: []
      responses:
        "200":
          description: Admin profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AdminProfile"
        "401":
          description: Unauthorized
    patch:
      tags: [AdminProfile]
      summary: Update admin profile
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdminUpdateProfileInput"
      responses:
        "200":
          description: Profile updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AdminProfile"
        "400":
          description: Update failed
        "401":
          description: Unauthorized
  /admin/profile/password:
    patch:
      tags: [AdminProfile]
      summary: Change admin password
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdminChangePasswordInput"
      responses:
        "200":
          description: Password changed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "400":
          description: Change failed
        "401":
          description: Unauthorized
  /admin/pet-types:
    post:
      tags: [AdminPets]
      summary: Create pet type
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePetTypeInput"
      responses:
        "201":
          description: Pet type created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/PetType"
        "400":
          description: Validation failed
    get:
      tags: [AdminPets]
      summary: Get all pet types
      security:
        - AccessToken: []
      responses:
        "200":
          description: Pet types list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/PetType"
        "401":
          description: Unauthorized
  /admin/pet-types/{id}:
    patch:
      tags: [AdminPets]
      summary: Update pet type
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePetTypeInput"
      responses:
        "200":
          description: Pet type updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/PetType"
        "400":
          description: Validation failed
        "404":
          description: Not found
    delete:
      tags: [AdminPets]
      summary: Delete pet type
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Pet type deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Not found
  /admin/pet-types/{typeId}/breeds:
    post:
      tags: [AdminPets]
      summary: Create pet breed
      security:
        - AccessToken: []
      parameters:
        - name: typeId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePetBreedInput"
      responses:
        "201":
          description: Pet breed created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/PetBreed"
        "400":
          description: Validation failed
        "404":
          description: Pet type not found
  /admin/pet-types/{id}/breeds:
    patch:
      tags: [AdminPets]
      summary: Replace pet breeds for a pet type
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePetBreedsInput"
      responses:
        "200":
          description: Pet breeds updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/PetType"
        "400":
          description: Validation failed
        "404":
          description: Pet type not found
    get:
      tags: [AdminPets]
      summary: Get pet breeds by type
      security:
        - AccessToken: []
      parameters:
        - name: typeId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Pet breeds list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/PetBreed"
        "404":
          description: Pet type not found
  /admin/pet-breeds/{id}:
    patch:
      tags: [AdminPets]
      summary: Update pet breed
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePetBreedInput"
      responses:
        "200":
          description: Pet breed updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/PetBreed"
        "404":
          description: Pet breed not found
    delete:
      tags: [AdminPets]
      summary: Delete pet breed
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Pet breed name
      responses:
        "200":
          description: Pet breed deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Pet breed not found
  /admin/adoptions:
    get:
      tags: [AdminAdoption]
      summary: List adoption pets
      security:
        - AccessToken: []
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [available, pending, adopted, all]
      responses:
        "200":
          description: Adoption list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/AdminAdoptionListItem"
    post:
      tags: [AdminAdoption]
      summary: Create adoption pet listing
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/AdminAdoptionCreateInput"
      responses:
        "201":
          description: Adoption listing created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AdoptionListing"
  /admin/adoptions/summary:
    get:
      tags: [AdminAdoption]
      summary: List adoption pets summary
      security:
        - AccessToken: []
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [available, pending, adopted]
      responses:
        "200":
          description: Adoption summary list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/AdminAdoptionSummaryItem"
  /admin/adoptions/{id}:
    get:
      tags: [AdminAdoption]
      summary: Get adoption pet details
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Adoption listing
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AdoptionListing"
        "404":
          description: Adoption listing not found
    patch:
      tags: [AdminAdoption]
      summary: Update adoption pet
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdminAdoptionUpdateInput"
      responses:
        "200":
          description: Adoption listing updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AdoptionListing"
        "404":
          description: Adoption listing not found
    delete:
      tags: [AdminAdoption]
      summary: Delete adoption pet
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Adoption listing deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Adoption listing not found
  /admin/adoptions/{id}/health-records:
    get:
      tags: [AdminAdoption]
      summary: List health records for adoption pet
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: type
          in: query
          required: false
          schema:
            type: string
            enum: [vaccination, checkup, medication, tick_flea, surgery, dental, other]
      responses:
        "200":
          description: Health records
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/AdoptionHealthRecord"
        "404":
          description: Adoption listing not found
    post:
      tags: [AdminAdoption]
      summary: Add health record for adoption pet
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [type, recordDetails]
              properties:
                type:
                  type: string
                  enum: [vaccination, checkup, medication, tick_flea, surgery, dental, other]
                recordDetails:
                  type: string
                  description: JSON string (recordName required; other fields optional)
                  example: >-
                    {"recordName":"Rabies","batchLotNo":"A1","otherInfo":"Annual","cost":"450","date":"2025-01-15","nextDueDate":"2025-01-25","reminder":{"enabled":true,"offset":"1 week"}}
                veterinarian:
                  type: string
                  description: JSON string (optional)
                vitalSigns:
                  type: string
                  description: JSON string (optional)
                observation:
                  type: string
                  description: JSON string (optional)
                files:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: Up to 3 attachments
          application/json:
            schema:
              type: object
              required: [type, recordDetails]
              properties:
                type:
                  type: string
                  enum: [vaccination, checkup, medication, tick_flea, surgery, dental, other]
                recordDetails:
                  type: object
                  description: recordName required; other fields optional
                veterinarian:
                  type: object
                  description: optional
                vitalSigns:
                  type: object
                  description: optional
                observation:
                  type: object
                  description: optional
      responses:
        "201":
          description: Health record added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AdoptionListing"
        "404":
          description: Adoption listing not found
  /admin/adoptions/{id}/health-records/{recordId}:
    delete:
      tags: [AdminAdoption]
      summary: Delete health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: recordId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Health record deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Health record not found
  /admin/adoptions/{id}/status:
    patch:
      tags: [AdminAdoption]
      summary: Update adoption status
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                  enum: [available, pending, adopted]
      responses:
        "200":
          description: Adoption status updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AdoptionListing"
        "404":
          description: Adoption listing not found
  /admin/adoptions/requests:
    get:
      tags: [AdminAdoptionRequests]
      summary: List adoption requests
      security:
        - AccessToken: []
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [all, pending, delivered]
      responses:
        "200":
          description: Adoption requests list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/AdminAdoptionRequestListItem"
  /admin/adoptions/requests/{id}:
    get:
      tags: [AdminAdoptionRequests]
      summary: Get adoption request details
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Adoption request
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AdminAdoptionRequestDetails"
        "404":
          description: Adoption request not found
    delete:
      tags: [AdminAdoptionRequests]
      summary: Delete adoption request
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Adoption request deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Adoption request not found
  /admin/adoptions/requests/{id}/status:
    patch:
      tags: [AdminAdoptionRequests]
      summary: Update adoption request status
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                  enum: [pending, delivered]
      responses:
        "200":
          description: Adoption request updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AdminAdoptionRequestDetails"
        "404":
          description: Adoption request not found
  /adoptions/{id}/request:
    post:
      tags: [UserAdoption]
      summary: Request adoption
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "201":
          description: Adoption request submitted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AdoptionRequest"
        "404":
          description: Adoption listing not found
  /admin/users:
    get:
      tags: [AdminUsers]
      summary: Get all pet owners
      security:
        - AccessToken: []
      responses:
        "200":
          description: Users list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/AdminUserSummary"
        "401":
          description: Unauthorized
  /admin/users/export:
    get:
      tags: [AdminUsers]
      summary: Export pet owners as CSV
      security:
        - AccessToken: []
      responses:
        "200":
          description: CSV file
          content:
            text/csv:
              schema:
                type: string
        "401":
          description: Unauthorized
  /admin/services:
    get:
      tags: [AdminServiceManagement]
      summary: Get all service requests
      security:
        - AccessToken: []
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [all, pending, completed]
            default: all
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        "200":
          description: Service requests list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/ServiceRequestSummary"
                      pagination:
                        type: object
                        properties:
                          total:
                            type: integer
                          page:
                            type: integer
                          limit:
                            type: integer
        "401":
          description: Unauthorized
  /admin/services/{id}:
    get:
      tags: [AdminServiceManagement]
      summary: Get service request details
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Service request details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/ServiceRequestDetails"
        "401":
          description: Unauthorized
        "404":
          description: Service request not found
    delete:
      tags: [AdminServiceManagement]
      summary: Delete service request
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Service request deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "401":
          description: Unauthorized
        "404":
          description: Service request not found
  /admin/services/{id}/status:
    patch:
      tags: [AdminServiceManagement]
      summary: Update service request status
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateServiceStatusInput"
      responses:
        "200":
          description: Service status updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "400":
          description: Validation failed
        "401":
          description: Unauthorized
        "404":
          description: Service request not found
  /admin/users/{id}:
    get:
      tags: [AdminUsers]
      summary: Get pet owner details
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: User details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AdminUserDetails"
        "401":
          description: Unauthorized
        "404":
          description: User not found
    delete:
      tags: [AdminUsers]
      summary: Delete pet owner
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: User deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "401":
          description: Unauthorized
        "404":
          description: User not found
  /admin/users/{id}/profile:
    get:
      tags: [AdminUsers]
      summary: Get pet owner profile (admin view)
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: User profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AdminUserProfileResponse"
        "401":
          description: Unauthorized
        "404":
          description: User not found
  /auth/register:
    post:
      tags: [UserAuth]
      summary: Register a new user and send email OTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterInput"
      responses:
        "201":
          description: OTP sent
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      email:
                        type: string
                      phone:
                        type: string
                      name:
                        type: string
        "400":
          description: Registration failed
  /auth/verify-email:
    post:
      tags: [UserAuth]
      summary: Verify email OTP and get setup token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VerifyEmailInput"
      responses:
        "200":
          description: Email verified
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      user:
                        $ref: "#/components/schemas/UserAuthUser"
                      needsProfileSetup:
                        type: boolean
                      setupToken:
                        type: string
        "400":
          description: Verification failed
  /auth/resend-email-otp:
    post:
      tags: [UserAuth]
      summary: Resend email OTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResendEmailOtpInput"
      responses:
        "200":
          description: OTP resent
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "400":
          description: Resend failed
  /auth/login:
    post:
      tags: [UserAuth]
      summary: Login with email and password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginInput"
      responses:
        "200":
          description: Login success or profile setup required
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      user:
                        $ref: "#/components/schemas/UserAuthUser"
                      tokens:
                        $ref: "#/components/schemas/AuthTokens"
                      needsProfileSetup:
                        type: boolean
                      setupToken:
                        type: string
        "400":
          description: Login failed
  /auth/complete-profile:
    post:
      tags: [UserAuth]
      summary: Complete onboarding and receive tokens
      security:
        - SetupToken: []
        - AccessToken: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [username, country]
              properties:
                username:
                  type: string
                country:
                  type: string
                avatarUrl:
                  type: string
                  format: uri
                favorites:
                  type: array
                  items:
                    type: string
                file:
                  type: string
                  format: binary
      responses:
        "200":
          description: Profile completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      user:
                        $ref: "#/components/schemas/UserAuthUser"
                      tokens:
                        $ref: "#/components/schemas/AuthTokens"
        "400":
          description: Profile setup failed
        "401":
          description: Unauthorized
  /auth/refresh:
    post:
      tags: [UserAuth]
      summary: Refresh access and refresh tokens
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshTokenInput"
      responses:
        "200":
          description: Tokens refreshed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AuthTokens"
        "400":
          description: Refresh failed
  /auth/logout:
    post:
      tags: [UserAuth]
      summary: Logout by revoking refresh token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshTokenInput"
      responses:
        "200":
          description: Logged out
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "400":
          description: Logout failed
  /auth/me:
    get:
      tags: [UserAuth]
      summary: Get authenticated user
      security:
        - AccessToken: []
      responses:
        "200":
          description: User authenticated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  user:
                    $ref: "#/components/schemas/AuthTokenPayload"
        "401":
          description: Unauthorized
  /auth/admin-test:
    get:
      tags: [UserAuth]
      summary: Admin-only test endpoint
      security:
        - AccessToken: []
      responses:
        "200":
          description: Admin access granted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  user:
                    $ref: "#/components/schemas/AuthTokenPayload"
        "401":
          description: Unauthorized
  /auth/forgot-password:
    post:
      tags: [UserAuth]
      summary: Request password reset OTP
      description: "Step 1/3: Request OTP by email. POST /api/user/auth/forgot-password {\"email\":\"user@example.com\"}"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ForgotPasswordInput"
            example:
              email: user@example.com
      responses:
        "200":
          description: OTP sent if email exists
          content:
            application/json:
              example:
                success: true
                message: If this email exists, an OTP has been sent
        "400":
          description: Request failed
  /auth/verify-reset-otp:
    post:
      tags: [UserAuth]
      summary: Verify password reset OTP
      description: "Step 2/3: Verify OTP. POST /api/user/auth/verify-reset-otp {\"email\":\"user@example.com\",\"otp\":\"1234\"}"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VerifyResetPasswordOtpInput"
            example:
              email: user@example.com
              otp: "1234"
      responses:
        "200":
          description: OTP verified
          content:
            application/json:
              example:
                success: true
                message: OTP verified
        "400":
          description: OTP verification failed
  /auth/reset-password:
    post:
      tags: [UserAuth]
      summary: Reset password after OTP verification
      description: "Step 3/3: Change password (no OTP here). POST /api/user/auth/reset-password {\"email\":\"user@example.com\",\"password\":\"newPassword123\"}"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResetPasswordInput"
            example:
              email: user@example.com
              password: newPassword123
      responses:
        "200":
          description: Password reset
          content:
            application/json:
              example:
                success: true
                message: Password reset successful
        "400":
          description: Reset failed
  /auth/phone/send-otp:
    post:
      tags: [UserAuth]
      summary: Send phone OTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendPhoneOtpInput"
            example:
              phone: "9876543210"
              carrier: verizon
      responses:
        "200":
          description: OTP sent
          content:
            application/json:
              example:
                success: true
                message: OTP sent
        "400":
          description: Send failed
  /auth/phone/verify-otp:
    post:
      tags: [UserAuth]
      summary: Verify phone OTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VerifyPhoneOtpInput"
            example:
              phone: "9876543210"
              otp: "1234"
      responses:
        "200":
          description: Phone verified or profile setup required
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      user:
                        $ref: "#/components/schemas/UserAuthUser"
                      tokens:
                        $ref: "#/components/schemas/AuthTokens"
                      needsProfileSetup:
                        type: boolean
                      setupToken:
                        type: string
        "400":
          description: Verification failed
  /uploads/user/avatar:
    post:
      tags: [UserUploads]
      summary: Upload user avatar (accepts setup or access token)
      security:
        - SetupToken: []
        - AccessToken: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [file]
              properties:
                file:
                  type: string
                  format: binary
      responses:
        "201":
          description: Avatar uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      avatarUrl:
                        type: string
                        format: uri
                      url:
                        type: string
                        format: uri
                      key:
                        type: string
        "400":
          description: Upload failed
        "401":
          description: Unauthorized
  /uploads/user/cover:
    post:
      tags: [UserUploads]
      summary: Upload user cover (accepts setup or access token)
      security:
        - SetupToken: []
        - AccessToken: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [file]
              properties:
                file:
                  type: string
                  format: binary
      responses:
        "201":
          description: Cover uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      coverUrl:
                        type: string
                        format: uri
                      url:
                        type: string
                        format: uri
                      key:
                        type: string
        "400":
          description: Upload failed
        "401":
          description: Unauthorized
  /uploads/pets/{id}/avatar:
    post:
      tags: [UserUploads]
      summary: Upload pet avatar
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [file]
              properties:
                file:
                  type: string
                  format: binary
      responses:
        "201":
          description: Pet avatar uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      avatarUrl:
                        type: string
                        format: uri
                      url:
                        type: string
                        format: uri
                      key:
                        type: string
        "400":
          description: Upload failed
        "404":
          description: Pet not found
  /uploads/pets/{id}/photos:
    post:
      tags: [UserUploads]
      summary: Upload pet photos
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [files]
              properties:
                files:
                  type: array
                  minItems: 1
                  maxItems: 5
                  items:
                    type: string
                    format: binary
      responses:
        "201":
          description: Pet photos uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      photos:
                        type: array
                        items:
                          type: object
                          properties:
                            url:
                              type: string
                              format: uri
                            key:
                              type: string
        "400":
          description: Upload failed
        "404":
          description: Pet not found
  /uploads/pets/{id}/documents:
    post:
      tags: [UserUploads]
      summary: Upload pet document
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [title, file]
              properties:
                title:
                  type: string
                file:
                  type: string
                  format: binary
      responses:
        "201":
          description: Medical document uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      document:
                        type: object
                        properties:
                          title:
                            type: string
                          documentUrl:
                            type: string
                            format: uri
                          uploadedAt:
                            type: string
                            format: date-time
                          key:
                            type: string
        "400":
          description: Upload failed
        "404":
          description: Pet not found
  /uploads/pets/{id}/photos/{fileId}:
    delete:
      tags: [UserUploads]
      summary: Delete pet photo
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: fileId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Photo deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Photo not found
  /uploads/pets/{id}/documents/{fileId}:
    delete:
      tags: [UserUploads]
      summary: Delete pet document
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: fileId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Document deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Document not found
  /pets:
    get:
      tags: [UserPets]
      summary: Get my pets
      security:
        - AccessToken: []
      responses:
        "200":
          description: Pets list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Pet"
        "401":
          description: Unauthorized
    post:
      tags: [UserPets]
      summary: Create pet (multipart with photos)
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [name, files]
              properties:
                name:
                  type: string
                type:
                  type: string
                  description: Required when species is not provided.
                species:
                  type: string
                  description: Required when type is not provided.
                breed:
                  type: string
                age:
                  type: number
                weightLbs:
                  type: number
                gender:
                  type: string
                  enum: [male, female]
                trained:
                  type: boolean
                vaccinated:
                  type: boolean
                neutered:
                  type: boolean
                personality:
                  type: array
                  items:
                    type: string
                about:
                  type: string
                bio:
                  type: string
                files:
                  type: array
                  minItems: 1
                  maxItems: 3
                  items:
                    type: string
                    format: binary
                avatar:
                  type: string
                  format: binary
      responses:
        "201":
          description: Pet created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/Pet"
        "400":
          description: Validation failed
        "401":
          description: Unauthorized
  /pets/{id}:
    get:
      tags: [UserPets]
      summary: Get pet by id
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Pet
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/Pet"
        "404":
          description: Pet not found
    patch:
      tags: [UserPets]
      summary: Update pet
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  type: array
                  maxItems: 3
                  items:
                    type: string
                    format: binary
                  description: New pet photos (max 3). Replaces previous photos when provided.
                avatar:
                  type: string
                  format: binary
                name:
                  type: string
                type:
                  type: string
                species:
                  type: string
                breed:
                  type: string
                age:
                  type: number
                weightLbs:
                  type: number
                gender:
                  type: string
                  enum: [male, female]
                trained:
                  type: boolean
                vaccinated:
                  type: boolean
                neutered:
                  type: boolean
                personality:
                  type: array
                  items:
                    type: string
                about:
                  type: string
                bio:
                  type: string
                keepPhotos:
                  type: array
                  items:
                    type: string
                deletePhotos:
                  type: array
                  items:
                    type: string
          application/json:
            schema:
              $ref: "#/components/schemas/PetUpdateInput"
      responses:
        "200":
          description: Pet updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/Pet"
        "404":
          description: Pet not found
    delete:
      tags: [UserPets]
      summary: Delete pet
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Pet deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Pet not found
  /pets/{id}/health-records:
    get:
      tags: [UserPets]
      summary: List pet health records
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: type
          in: query
          required: false
          schema:
            type: string
            enum: [vaccination, checkup, medication, tick_flea, surgery, dental, other]
      responses:
        "200":
          description: Health records list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/PetHealthRecord"
        "401":
          description: Unauthorized
        "404":
          description: Pet not found
  /pets/{id}/health-records/vaccination:
    post:
      tags: [UserPets]
      summary: Add vaccination health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/PetHealthRecordForm"
      responses:
        "201":
          description: Health record added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/Pet"
        "400":
          description: Validation failed
        "404":
          description: Pet not found
  /pets/{id}/health-records/checkup:
    post:
      tags: [UserPets]
      summary: Add checkup health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/PetHealthRecordForm"
      responses:
        "201":
          description: Health record added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/Pet"
        "400":
          description: Validation failed
        "404":
          description: Pet not found
  /pets/{id}/health-records/medication:
    post:
      tags: [UserPets]
      summary: Add medication health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/PetHealthRecordForm"
      responses:
        "201":
          description: Health record added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/Pet"
        "400":
          description: Validation failed
        "404":
          description: Pet not found
  /pets/{id}/health-records/tick-flea:
    post:
      tags: [UserPets]
      summary: Add tick and flea health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/PetHealthRecordForm"
      responses:
        "201":
          description: Health record added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/Pet"
        "400":
          description: Validation failed
        "404":
          description: Pet not found
  /pets/{id}/health-records/surgery:
    post:
      tags: [UserPets]
      summary: Add surgery health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/PetHealthRecordForm"
      responses:
        "201":
          description: Health record added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/Pet"
        "400":
          description: Validation failed
        "404":
          description: Pet not found
  /pets/{id}/health-records/dental:
    post:
      tags: [UserPets]
      summary: Add dental health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/PetHealthRecordForm"
      responses:
        "201":
          description: Health record added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/Pet"
        "400":
          description: Validation failed
        "404":
          description: Pet not found
  /pets/{id}/health-records/other:
    post:
      tags: [UserPets]
      summary: Add other health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/PetHealthRecordForm"
      responses:
        "201":
          description: Health record added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/Pet"
        "400":
          description: Validation failed
        "404":
          description: Pet not found
  /pets/{id}/health-records/{recordId}:
    patch:
      tags: [UserPets]
      summary: Update pet health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: recordId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/PetHealthRecordUpdateForm"
      responses:
        "200":
          description: Health record updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/PetHealthRecord"
        "400":
          description: Validation failed
        "404":
          description: Pet or record not found
    delete:
      tags: [UserPets]
      summary: Delete pet health record
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: recordId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Health record deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Pet or record not found
  /providers:
    get:
      tags: [UserProviders]
      summary: List providers
      parameters:
        - name: category
          in: query
          required: false
          schema:
            type: string
            enum: [vet, grooming, walking, training]
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [pending, verified, rejected]
        - name: search
          in: query
          required: false
          schema:
            type: string
        - name: minRating
          in: query
          required: false
          schema:
            type: number
            minimum: 0
            maximum: 5
        - name: lat
          in: query
          required: false
          schema:
            type: number
            minimum: -90
            maximum: 90
        - name: lng
          in: query
          required: false
          schema:
            type: number
            minimum: -180
            maximum: 180
        - name: radiusKm
          in: query
          required: false
          schema:
            type: number
            minimum: 0.1
            maximum: 200
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: Providers list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/ProviderListResponse"
        "400":
          description: Validation failed
    post:
      tags: [UserProviders]
      summary: Create provider profile
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ProviderCreateInput"
      responses:
        "201":
          description: Provider created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/Provider"
        "400":
          description: Validation failed
  /providers/{id}:
    get:
      tags: [UserProviders]
      summary: Get provider by id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Provider
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/Provider"
        "404":
          description: Provider not found
    patch:
      tags: [UserProviders]
      summary: Update provider profile
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ProviderUpdateInput"
      responses:
        "200":
          description: Provider updated
        "404":
          description: Provider not found
    delete:
      tags: [UserProviders]
      summary: Delete provider profile
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Provider deleted
        "404":
          description: Provider not found
  /providers/{id}/verify:
    patch:
      tags: [UserProviders]
      summary: Verify provider (admin only)
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ProviderVerifyInput"
      responses:
        "200":
          description: Provider verification updated
        "404":
          description: Provider not found
  /providers/{id}/reviews:
    post:
      tags: [UserProviders]
      summary: Create or update provider review
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ProviderReviewInput"
      responses:
        "201":
          description: Review saved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      review:
                        $ref: "#/components/schemas/ProviderReview"
                      provider:
                        $ref: "#/components/schemas/Provider"
        "400":
          description: Validation failed
        "404":
          description: Provider not found
  /appointments:
    post:
      tags: [UserAppointments]
      summary: Book an appointment
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AppointmentCreateInput"
      responses:
        "201":
          description: Appointment created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/Appointment"
        "400":
          description: Validation failed
        "404":
          description: Provider not found
  /appointments/me/customer:
    get:
      tags: [UserAppointments]
      summary: List customer appointments
      security:
        - AccessToken: []
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [pending, confirmed, cancelled, completed]
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: Appointments list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AppointmentListResponse"
        "400":
          description: Validation failed
  /appointments/me/provider:
    get:
      tags: [UserAppointments]
      summary: List provider appointments
      security:
        - AccessToken: []
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [pending, confirmed, cancelled, completed]
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: Appointments list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AppointmentListResponse"
        "400":
          description: Validation failed
  /appointments/{id}/status:
    patch:
      tags: [UserAppointments]
      summary: Update appointment status
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AppointmentStatusUpdateInput"
      responses:
        "200":
          description: Appointment status updated
        "404":
          description: Appointment not found
  /messages/conversations:
    get:
      tags: [UserMessages]
      summary: List conversations
      security:
        - AccessToken: []
      responses:
        "200":
          description: Conversations list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Conversation"
        "401":
          description: Unauthorized
  /messages/conversations/{id}/messages:
    get:
      tags: [UserMessages]
      summary: List messages in a conversation
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        "200":
          description: Messages list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/MessageListResponse"
        "400":
          description: Validation failed
        "401":
          description: Unauthorized
        "404":
          description: Conversation not found
  /messages:
    post:
      tags: [UserMessages]
      summary: Send a message
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MessageCreateInput"
      responses:
        "201":
          description: Message sent
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/Message"
        "400":
          description: Validation failed
        "401":
          description: Unauthorized
  /messages/conversations/{id}/read:
    post:
      tags: [UserMessages]
      summary: Mark conversation as read
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Conversation marked as read
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      updated:
                        type: integer
        "400":
          description: Validation failed
        "401":
          description: Unauthorized
        "404":
          description: Conversation not found
  /adoptions:
    get:
      tags: [UserAdoption]
      summary: List adoption listings
      parameters:
        - name: species
          in: query
          required: false
          schema:
            type: string
        - name: breed
          in: query
          required: false
          schema:
            type: string
        - name: location
          in: query
          required: false
          schema:
            type: string
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [available, pending, adopted]
        - name: ageMin
          in: query
          required: false
          schema:
            type: number
            minimum: 0
        - name: ageMax
          in: query
          required: false
          schema:
            type: number
            minimum: 0
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: Adoption listings
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AdoptionListResponse"
        "400":
          description: Validation failed
    post:
      tags: [UserAdoption]
      summary: Create adoption listing
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdoptionCreateInput"
      responses:
        "201":
          description: Adoption listing created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AdoptionListing"
        "400":
          description: Validation failed
  /adoptions/{id}:
    get:
      tags: [UserAdoption]
      summary: Get adoption listing by id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Adoption listing
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/AdoptionListing"
        "404":
          description: Adoption listing not found
    delete:
      tags: [UserAdoption]
      summary: Delete adoption listing
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Adoption listing deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "404":
          description: Adoption listing not found or not authorized
  /adoptions/{id}/status:
    patch:
      tags: [UserAdoption]
      summary: Update adoption status (admin only)
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdoptionStatusUpdateInput"
      responses:
        "200":
          description: Adoption status updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/AdoptionListing"
        "404":
          description: Adoption listing not found
  /adoptions/me/listings:
    get:
      tags: [UserAdoption]
      summary: List my adoption listings
      security:
        - AccessToken: []
      responses:
        "200":
          description: User adoption listings
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/AdoptionListing"
        "401":
          description: Unauthorized
  /adoptions/basket:
    get:
      tags: [UserAdoption]
      summary: Get adoption basket
      security:
        - AccessToken: []
      responses:
        "200":
          description: Basket items
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            listingId:
                              type: string
                            petName:
                              type: string
                            petType:
                              type: string
                            petBreed:
                              type: string
                            petAge:
                              type: integer
                              nullable: true
                            avatarUrl:
                              type: string
                              format: uri
                              nullable: true
                            price:
                              type: number
                            status:
                              type: string
        "401":
          description: Unauthorized
  /adoptions/basket/items:
    post:
      tags: [UserAdoption]
      summary: Add item to adoption basket
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [listingId]
              properties:
                listingId:
                  type: string
      responses:
        "200":
          description: Added to basket
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
        "401":
          description: Unauthorized
  /adoptions/basket/items/{listingId}:
    delete:
      tags: [UserAdoption]
      summary: Remove item from adoption basket
      security:
        - AccessToken: []
      parameters:
        - name: listingId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Removed from basket
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
        "401":
          description: Unauthorized
  /adoptions/basket/checkout:
    post:
      tags: [UserAdoption]
      summary: Checkout adoption basket
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [listingIds, customer]
              properties:
                listingIds:
                  type: array
                  items:
                    type: string
                customer:
                  type: object
                  required: [name, address, phone]
                  properties:
                    name:
                      type: string
                    address:
                      type: string
                    phone:
                      type: string
      responses:
        "201":
          description: Checkout created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      orderId:
                        type: string
                      paymentIntentId:
                        type: string
                        nullable: true
                      clientSecret:
                        type: string
                        nullable: true
                      customer:
                        type: object
                        properties:
                          name:
                            type: string
                          address:
                            type: string
                          phone:
                            type: string
                      subtotal:
                        type: number
                      taxPercent:
                        type: number
                      taxAmount:
                        type: number
                      processingFee:
                        type: number
                      shippingFee:
                        type: number
                      total:
                        type: number
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            listing:
                              type: string
                            petName:
                              type: string
                            petType:
                              type: string
                            petBreed:
                              type: string
                            petAge:
                              type: integer
                              nullable: true
                            petGender:
                              type: string
                            avatarUrl:
                              type: string
                              format: uri
                              nullable: true
                            price:
                              type: number
        "400":
          description: Checkout failed
        "401":
          description: Unauthorized
  /users/me:
    get:
      tags: [UserProfiles]
      summary: Get own profile
      security:
        - AccessToken: []
      responses:
        "200":
          description: Profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/User"
        "401":
          description: Unauthorized
    patch:
      tags: [UserProfiles]
      summary: Update own profile
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProfileInput"
      responses:
        "200":
          description: Profile updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/User"
        "400":
          description: Update failed
        "401":
          description: Unauthorized
  /users/search:
    get:
      tags: [UserProfiles]
      summary: Search users by name or username
      security:
        - AccessToken: []
      parameters:
        - in: query
          name: query
          required: true
          schema:
            type: string
            example: jane
          description: Search term for name or username
      responses:
        "200":
          description: User search results
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/UserSearchResult"
        "400":
          description: Validation failed
        "401":
          description: Unauthorized
  /users/pet-pals:
    get:
      tags: [UserProfiles]
      summary: List pet pals (other users)
      security:
        - AccessToken: []
      parameters:
        - in: query
          name: limit
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 20
            example: 15
      responses:
        "200":
          description: Pet pals list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/PetPalSummary"
        "401":
          description: Unauthorized
  /users/me/password:
    patch:
      tags: [UserProfiles]
      summary: Change own password
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangePasswordInput"
      responses:
        "200":
          description: Password changed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "400":
          description: Change failed
        "401":
          description: Unauthorized
  /users/me/avatar:
    patch:
      tags: [UserProfiles]
      summary: Update own avatar (file upload or URL)
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAvatarInput"
      responses:
        "200":
          description: Avatar updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/User"
        "400":
          description: Update failed
        "401":
          description: Unauthorized
  /users/me/cover:
    patch:
      tags: [UserProfiles]
      summary: Update own cover URL
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateCoverInput"
      responses:
        "200":
          description: Cover updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/User"
        "400":
          description: Update failed
        "401":
          description: Unauthorized
  /users/me/delete-request:
    post:
      tags: [UserProfiles]
      summary: Request account deletion
      security:
        - AccessToken: []
      responses:
        "200":
          description: Deletion request received
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/DeletionRequestResponse"
        "400":
          description: Request failed
        "401":
          description: Unauthorized
  /users/me/delete-request/withdraw:
    post:
      tags: [UserProfiles]
      summary: Withdraw account deletion request
      security:
        - AccessToken: []
      responses:
        "200":
          description: Deletion request withdrawn
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    $ref: "#/components/schemas/DeletionRequestResponse"
        "400":
          description: Withdraw failed
        "401":
          description: Unauthorized
  /users/{id}:
    get:
      tags: [UserProfiles]
      summary: Get user by id
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: User
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/User"
        "401":
          description: Unauthorized
        "404":
          description: User not found
  /community/posts:
    post:
      tags: [UserCommunity]
      summary: Create a community post
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityPostCreateInput"
          multipart/form-data:
            schema:
              type: object
              properties:
                text:
                  type: string
                files:
                  type: array
                  maxItems: 5
                  items:
                    type: string
                    format: binary
      responses:
        "201":
          description: Post created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityPost"
        "400":
          description: Validation failed
        "401":
          description: Unauthorized
    get:
      tags: [UserCommunity]
      summary: List community posts
      security:
        - AccessToken: []
      parameters:
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: Posts list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/CommunityPost"
                  pagination:
                    type: object
                    properties:
                      total:
                        type: integer
                      page:
                        type: integer
                      limit:
                        type: integer
                      totalPages:
                        type: integer
        "401":
          description: Unauthorized
  /community/posts/me:
    get:
      tags: [UserCommunity]
      summary: List my community posts
      security:
        - AccessToken: []
      parameters:
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: My posts list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/CommunityPost"
                  pagination:
                    type: object
                    properties:
                      total:
                        type: integer
                      page:
                        type: integer
                      limit:
                        type: integer
                      totalPages:
                        type: integer
        "401":
          description: Unauthorized
  /community/posts/user/{id}:
    get:
      tags: [UserCommunity]
      summary: List community posts for a user
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: User posts list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/CommunityPost"
                  pagination:
                    type: object
                    properties:
                      total:
                        type: integer
                      page:
                        type: integer
                      limit:
                        type: integer
                      totalPages:
                        type: integer
        "401":
          description: Unauthorized
  /community/posts/me/photos:
    get:
      tags: [UserCommunity]
      summary: List my post photos
      security:
        - AccessToken: []
      responses:
        "200":
          description: My post photos
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        url:
                          type: string
                          format: uri
                        type:
                          type: string
                          enum: [image]
                        postId:
                          type: string
                        createdAt:
                          type: string
                          format: date-time
        "401":
          description: Unauthorized
  /community/posts/{id}:
    get:
      tags: [UserCommunity]
      summary: Get community post
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Post
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityPost"
        "404":
          description: Post not found
    patch:
      tags: [UserCommunity]
      summary: Update community post
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityPostUpdateInput"
          multipart/form-data:
            schema:
              type: object
              properties:
                text:
                  type: string
                keepMedia:
                  type: array
                  items:
                    type: string
                deleteMedia:
                  type: array
                  items:
                    type: string
                files:
                  type: array
                  maxItems: 5
                  items:
                    type: string
                    format: binary
      responses:
        "200":
          description: Post updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityPost"
        "404":
          description: Post not found
    delete:
      tags: [UserCommunity]
      summary: Delete community post
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Post deleted
        "404":
          description: Post not found
  /community/posts/{id}/like:
    post:
      tags: [UserCommunity]
      summary: Like or unlike a post
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Post liked or unliked
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityPost"
        "404":
          description: Post not found
  /community/posts/{id}/comments:
    post:
      tags: [UserCommunity]
      summary: Add comment to a post
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityCommentCreateInput"
      responses:
        "201":
          description: Comment added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityComment"
        "404":
          description: Post not found
    get:
      tags: [UserCommunity]
      summary: List comments and replies for a post
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Comments list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        comment:
                          $ref: "#/components/schemas/CommunityComment"
                        replies:
                          type: array
                          items:
                            $ref: "#/components/schemas/CommunityComment"
        "404":
          description: Post not found
  /community/comments/{id}/replies:
    post:
      tags: [UserCommunity]
      summary: Reply to a comment
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityCommentCreateInput"
      responses:
        "201":
          description: Reply added
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityComment"
        "404":
          description: Comment not found
  /community/posts/{id}/share:
    post:
      tags: [UserCommunity]
      summary: Share a post
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityShareInput"
      responses:
        "201":
          description: Post shared
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityPost"
        "404":
          description: Post not found
  /community/posts/{id}/report:
    post:
      tags: [UserCommunity]
      summary: Report a post
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityReportInput"
      responses:
        "201":
          description: Report submitted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityReport"
        "400":
          description: Validation failed
  /admin/reports:
    get:
      tags: [AdminReports]
      summary: List community reports
      security:
        - AccessToken: []
      responses:
        "200":
          description: Reports list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/CommunityReport"
        "401":
          description: Unauthorized
  /admin/reports/{id}:
    get:
      tags: [AdminReports]
      summary: Get report details
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Report details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityReport"
        "404":
          description: Report not found
    delete:
      tags: [AdminReports]
      summary: Delete a report
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Report deleted
        "404":
          description: Report not found
  /admin/reports/{id}/remove-content:
    post:
      tags: [AdminReports]
      summary: Remove reported content
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Content removed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityReport"
        "404":
          description: Report not found
  /admin/reports/{id}/warn:
    post:
      tags: [AdminReports]
      summary: Warn reported user
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: User warned
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityReport"
        "404":
          description: Report not found
  /admin/reports/{id}/dismiss:
    post:
      tags: [AdminReports]
      summary: Dismiss a report
      security:
        - AccessToken: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Report dismissed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: "#/components/schemas/CommunityReport"
        "404":
          description: Report not found
